(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{lu3c:function(t,i,e){"use strict";e.r(i),e.d(i,"LoginModule",(function(){return x}));var o=e("ofXK"),n=e("3Pt+"),r=e("tyNb"),s=e("fXoL"),a=e("N/25");function b(t,i){1&t&&(s.Nb(0,"span",18),s.qc(1,"Enter a valid 10-digit mobile number"),s.Mb())}function u(t,i){if(1&t){const t=s.Ob();s.Nb(0,"div",10),s.Nb(1,"form",11),s.Ub("ngSubmit",(function(){return s.kc(t),s.Wb().sendOtp()})),s.Nb(2,"div",12),s.Nb(3,"label",13),s.qc(4,"Mobile"),s.Mb(),s.Kb(5,"input",14),s.oc(6,b,2,0,"span",15),s.Mb(),s.Nb(7,"div",16),s.Nb(8,"button",17),s.qc(9," Send Otp "),s.Mb(),s.Mb(),s.Mb(),s.Mb()}if(2&t){const t=s.Wb();s.xb(1),s.bc("formGroup",t.loginSendOtpForm),s.xb(5),s.bc("ngIf",!t.loginSendOtpForm.controls.inputMobile.valid&&t.loginSendOtpForm.controls.inputMobile.touched)}}function c(t,i){1&t&&(s.Nb(0,"span",18),s.qc(1,"OTP is required"),s.Mb())}function l(t,i){if(1&t){const t=s.Ob();s.Nb(0,"div",10),s.Nb(1,"form",11),s.Ub("ngSubmit",(function(){return s.kc(t),s.Wb().verifyOtp()})),s.Nb(2,"div",12),s.Nb(3,"label",13),s.qc(4,"OTP"),s.Mb(),s.Kb(5,"input",19),s.oc(6,c,2,0,"span",15),s.Mb(),s.Nb(7,"div",16),s.Nb(8,"button",17),s.qc(9," Verify Otp "),s.Mb(),s.Mb(),s.Mb(),s.Mb()}if(2&t){const t=s.Wb();s.xb(1),s.bc("formGroup",t.loginVerifyOtpForm),s.xb(5),s.bc("ngIf",!t.loginVerifyOtpForm.controls.inputOtp.valid&&t.loginVerifyOtpForm.controls.inputOtp.touched)}}function d(t,i){1&t&&(s.Nb(0,"span",18),s.qc(1,"Name is required"),s.Mb())}function p(t,i){1&t&&(s.Nb(0,"span",18),s.qc(1,"Email is required"),s.Mb())}function m(t,i){if(1&t){const t=s.Ob();s.Nb(0,"div",10),s.Nb(1,"form",11),s.Ub("ngSubmit",(function(){return s.kc(t),s.Wb().saveRegisteration()})),s.Nb(2,"div",12),s.Nb(3,"label",13),s.qc(4,"Name"),s.Mb(),s.Kb(5,"input",20),s.oc(6,d,2,0,"span",15),s.Mb(),s.Nb(7,"div",12),s.Nb(8,"label",13),s.qc(9,"Email"),s.Mb(),s.Kb(10,"input",21),s.oc(11,p,2,0,"span",15),s.Mb(),s.Nb(12,"div",16),s.Nb(13,"button",17),s.qc(14," Save "),s.Mb(),s.Mb(),s.Mb(),s.Mb()}if(2&t){const t=s.Wb();s.xb(1),s.bc("formGroup",t.registerationForm),s.xb(5),s.bc("ngIf",!t.registerationForm.controls.regName.valid&&t.registerationForm.controls.regName.touched),s.xb(5),s.bc("ngIf",!t.registerationForm.controls.regEmail.valid&&t.registerationForm.controls.regEmail.touched)}}function g(t,i){1&t&&(s.Nb(0,"span",18),s.qc(1,"Pincode is required"),s.Mb())}function f(t,i){if(1&t){const t=s.Ob();s.Nb(0,"div",10),s.Nb(1,"form",11),s.Ub("ngSubmit",(function(){return s.kc(t),s.Wb().checkPincode()})),s.Nb(2,"div",12),s.Nb(3,"label",13),s.qc(4,"Pincode"),s.Mb(),s.Kb(5,"input",22),s.oc(6,g,2,0,"span",15),s.Mb(),s.Nb(7,"div",16),s.Nb(8,"button",17),s.qc(9," Submit "),s.Mb(),s.Mb(),s.Mb(),s.Mb()}if(2&t){const t=s.Wb();s.xb(1),s.bc("formGroup",t.pincodeForm),s.xb(5),s.bc("ngIf",!t.pincodeForm.controls.pincode.valid&&t.pincodeForm.controls.pincode.touched)}}function h(t,i){1&t&&(s.Nb(0,"span",18),s.qc(1,"House name is required"),s.Mb())}function v(t,i){1&t&&(s.Nb(0,"span",18),s.qc(1,"Landmark is required"),s.Mb())}function N(t,i){1&t&&(s.Nb(0,"span",18),s.qc(1,"House number is required"),s.Mb())}function M(t,i){1&t&&(s.Nb(0,"span",18),s.qc(1,"City is required"),s.Mb())}function y(t,i){if(1&t){const t=s.Ob();s.Nb(0,"div",10),s.Nb(1,"form",11),s.Ub("ngSubmit",(function(){return s.kc(t),s.Wb().registerCustomer()})),s.Nb(2,"div",23),s.Nb(3,"div",24),s.Nb(4,"div",12),s.Nb(5,"label",13),s.qc(6,"House Name"),s.Mb(),s.Kb(7,"input",25),s.oc(8,h,2,0,"span",15),s.Mb(),s.Nb(9,"div",12),s.Nb(10,"label",13),s.qc(11,"Landmark"),s.Mb(),s.Kb(12,"input",26),s.oc(13,v,2,0,"span",15),s.Mb(),s.Mb(),s.Nb(14,"div",24),s.Nb(15,"div",12),s.Nb(16,"label",13),s.qc(17,"House Number"),s.Mb(),s.Kb(18,"input",27),s.oc(19,N,2,0,"span",15),s.Mb(),s.Nb(20,"div",12),s.Nb(21,"label",13),s.qc(22,"City"),s.Mb(),s.Kb(23,"input",28),s.oc(24,M,2,0,"span",15),s.Mb(),s.Mb(),s.Mb(),s.Nb(25,"div",29),s.Nb(26,"button",17),s.qc(27," Submit "),s.Mb(),s.Mb(),s.Mb(),s.Mb()}if(2&t){const t=s.Wb();s.xb(1),s.bc("formGroup",t.addressForm),s.xb(7),s.bc("ngIf",!t.addressForm.controls.regHouseName.valid&&t.addressForm.controls.regHouseName.touched),s.xb(5),s.bc("ngIf",!t.addressForm.controls.regLandmark.valid&&t.addressForm.controls.regLandmark.touched),s.xb(6),s.bc("ngIf",!t.addressForm.controls.regHouseNum.valid&&t.addressForm.controls.regHouseNum.touched),s.xb(5),s.bc("ngIf",!t.addressForm.controls.regCity.valid&&t.addressForm.controls.regCity.touched)}}const O=function(t){return{"large-modal":t}};let F=(()=>{class t{constructor(t,i,e,o){this.fb=t,this._auth=i,this.router=e,this.route=o,this.activeLoginStep="step1",this.pincodeErrorMsg=!1,this.loginSendOtpForm=t.group({inputMobile:[null,n.o.compose([n.o.required,n.o.pattern("^((\\+91-?)|0)?[0-9]{10}$")])]})}ngOnInit(){}ngAfterViewInit(){this.urlWithoutAuxiliaryRoute=this.router.createUrlTree(["."],{relativeTo:this.route}).root.children[r.c].toString()}sendOtp(){this.loginSendOtpForm.valid&&(this.inputMobile=this.loginSendOtpForm.controls.inputMobile.value,this._auth.loginSendOtp(this.inputMobile).subscribe(t=>{"ok"===t.status&&(this.step2(),this.activeLoginStep="step2")}))}step2(){this.loginVerifyOtpForm=this.fb.group({inputOtp:[null,n.o.required]})}verifyOtp(){this.loginVerifyOtpForm.valid&&(this.inputOtp=this.loginVerifyOtpForm.controls.inputOtp.value,this._auth.loginVerifyOtp(this.inputMobile,this.inputOtp.toString()).subscribe(t=>{"ok"===t.status&&t.data.is_verified&&t.data.is_registered?this.router.navigate([this.urlWithoutAuxiliaryRoute]):"ok"===t.status&&t.data.is_verified&&!t.data.is_registered?(this.step3(),this.activeLoginStep="step3"):"ok"!==t.status||t.data.is_verified?"error"===t.status&&alert(t.error.msg):(alert("Wrong otp. Try again"),this.loginVerifyOtpForm.controls.inputOtp.setValue(""))}))}step3(){this.registerationForm=this.fb.group({regName:[null,n.o.required],regEmail:[null,n.o.required]})}saveRegisteration(){this.registerationForm.valid&&(this.inputName=this.registerationForm.controls.regName.value,this.inputEmail=this.registerationForm.controls.regEmail.value,this.step4(),this.activeLoginStep="step4")}step4(){this.pincodeForm=this.fb.group({pincode:[null,n.o.required]})}checkPincode(){this.pincodeForm.valid&&(this.inputPincode=this.pincodeForm.controls.pincode.value,this._auth.checkPincode({pincode:this.inputPincode}).subscribe(t=>{"ok"===t.status&&(this.inputDistrict=t.data.district_and_state.dst_Name,this.step5(),this.activeLoginStep="step5")},t=>{406===t.status&&(alert("We provide delivery to selected areas only. Pincode you provided is not supported by us"),this.pincodeForm.reset())}))}step5(){this.addressForm=this.fb.group({regHouseName:[null,n.o.required],regLandmark:[null,n.o.required],regHouseNum:[null,n.o.required],regCity:[this.inputDistrict,n.o.required]})}registerCustomer(){this.addressForm.valid&&this._auth.registerCustomer({name:this.inputName,house_name:this.addressForm.controls.regHouseName.value,land_mark:this.addressForm.controls.regLandmark.value,email:this.inputEmail,house_no:this.addressForm.controls.regHouseNum.value,city:this.inputDistrict,pincode:this.inputPincode,mobile:this.inputMobile,deli_latitude:"8.469907181816176",deli_longitude:"76.981595326828"}).subscribe(t=>{"ok"===t.status&&this.router.navigate([this.urlWithoutAuxiliaryRoute])})}closeLogin(){this.router.navigate([this.urlWithoutAuxiliaryRoute])}}return t.\u0275fac=function(i){return new(i||t)(s.Jb(n.b),s.Jb(a.a),s.Jb(r.d),s.Jb(r.a))},t.\u0275cmp=s.Db({type:t,selectors:[["app-login"]],decls:18,vars:8,consts:[["id","app"],["id","greeting-modals",1,"modals-container"],[1,"modals",3,"ngClass"],["href","javascript:void(0)",1,"closebtn",3,"click"],[1,"title"],[1,"logo-login"],["href","javascript:void(0)"],["src","assets/images/logo.png","alt","Consumerfed",1,"img-fluid"],["class","login-form",4,"ngIf"],["href","javascript:void(0)",1,"modals-bg"],[1,"login-form"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","first",1,"form-label"],["id","inputMobileField","name","inputMobile","type","number","value","","placeholder","10-digit Mobile number","formControlName","inputMobile",1,"form-input"],["class","invalid-field",4,"ngIf"],[1,"submitdiv"],["type","submit",1,"btn","submitbtn"],[1,"invalid-field"],["id","inputMobileField","name","inputMobile","type","number","value","","placeholder","Enter OTP received in your mobile number","formControlName","inputOtp",1,"form-input"],["name","inputName","type","text","value","","placeholder","","formControlName","regName",1,"form-input"],["name","inputEmail","type","text","value","","placeholder","","formControlName","regEmail",1,"form-input"],["name","inputPincode","type","text","value","","placeholder","","formControlName","pincode",1,"form-input"],[1,"row"],[1,"col-md-6","left-area-login"],["name","inputHouseName","type","text","value","","placeholder","","formControlName","regHouseName",1,"form-input"],["name","inputName","type","text","value","","placeholder","","formControlName","regLandmark",1,"form-input"],["name","inputHouseNum","type","text","value","","placeholder","","formControlName","regHouseNum",1,"form-input"],["name","inputCity","type","text","value","","placeholder","","formControlName","regCity",1,"form-input"],[1,"submitdiv",2,"margin-top","-20%"]],template:function(t,i){1&t&&(s.Nb(0,"div",0),s.Nb(1,"div",1),s.Nb(2,"div",2),s.Nb(3,"div"),s.Nb(4,"a",3),s.Ub("click",(function(){return i.closeLogin()})),s.qc(5,"\xd7"),s.Mb(),s.Mb(),s.Nb(6,"div",4),s.Nb(7,"h3"),s.qc(8,"Login / Register"),s.Mb(),s.Mb(),s.Nb(9,"div",5),s.Nb(10,"a",6),s.Kb(11,"img",7),s.Mb(),s.Mb(),s.oc(12,u,10,2,"div",8),s.oc(13,l,10,2,"div",8),s.oc(14,m,15,3,"div",8),s.oc(15,f,10,2,"div",8),s.oc(16,y,28,5,"div",8),s.Mb(),s.Kb(17,"a",9),s.Mb(),s.Mb()),2&t&&(s.xb(2),s.bc("ngClass",s.ec(6,O,"step5"===i.activeLoginStep)),s.xb(10),s.bc("ngIf","step1"===i.activeLoginStep),s.xb(1),s.bc("ngIf","step2"===i.activeLoginStep),s.xb(1),s.bc("ngIf","step3"===i.activeLoginStep),s.xb(1),s.bc("ngIf","step4"===i.activeLoginStep),s.xb(1),s.bc("ngIf","step5"===i.activeLoginStep))},directives:[o.i,o.k,n.q,n.i,n.d,n.l,n.a,n.h,n.c],styles:["input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}#greeting-modals[_ngcontent-%COMP%]{visibility:visible;opacity:1;transition:all .5s cubic-bezier(.075,.82,.165,1)}#greeting-modals[_ngcontent-%COMP%]   .modals[_ngcontent-%COMP%]{transform:translateY(-1rem);transition:all .3s cubic-bezier(.075,.82,.165,1);transition-delay:.2s;transform:translateY(0);opacity:1}.modals-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.modals-bg[_ngcontent-%COMP%], .modals-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;bottom:0}.modals-bg[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.2)}.modals[_ngcontent-%COMP%]{z-index:1;background-color:#fff;width:30%;max-width:100vh;padding:1rem;border-radius:8px}.title[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.invalid-field[_ngcontent-%COMP%]{color:red}.large-modal[_ngcontent-%COMP%]{width:40%!important}.closebtn[_ngcontent-%COMP%]{float:right;margin-top:-5%;color:#000;font-size:40px}"]}),t})(),q=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(i){return new(i||t)},imports:[[r.g.forChild([{path:"",component:F}])],r.g]}),t})(),x=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(i){return new(i||t)},imports:[[o.b,q,n.e,n.m]]}),t})()}}]);